{% extends "base.html" %}
{% load static %}  

{% block title %} My Account {% endblock %}

<!-- æ”¾å­åˆ†é çš„ css -->
{% block extra_css %} 
    {{ block.super }}  <!-- ç¹¼æ‰¿æ¯ç‰ˆçš„ css ä½†ä¸è¦è¦†è“‹ -->
    <link rel="stylesheet" href="{% static 'info.css' %}">
{% endblock %}


{% block content %}
    <!-- profile check  -->
    <div class="profile-check">
        <br>
        {% if profile_created %}
            <div class="banner">å·²ç‚ºä½ å»ºç«‹ Profileï¼Œè«‹è£œé½Šè³‡æ–™</div>
        {% elif not user_profile.wallet_address or not user_profile.contact_info %}
            <div class="banner"> âš ï¸ æœªå¡«å¯« Profileï¼Œè£œé½Šå¯è§£é–æ›´å¤šåŠŸèƒ½ ğŸ“</div>
        {% endif %}
    </div>
    
    <div class="user-info">
        <h2> My Account info </h2>

        <!-- å·²ç¶“å¡«å¯«çš„è³‡è¨Š -->
        <div class="profile-display">
            <!-- æ”¹æˆç”¨ table ? -->
            <ul>
                <li> Username: <code> {{ username }} </code> </li>
                {% if request.user.email %}
                <li> Email: {{ request.user.email }} </li>
                {% endif %}
            </ul>
            <ul>
                <li> Wallet address: {{ user_profile.wallet_address }} </li>
                <li> Contact info: {{ user_profile.contact_info }} </li>
            </ul>            
        </div> <br>

        <h3> Edit profile </h3>
        <!-- å¡«å¯«è­¦å‘Š -->
        <div class="profile-msg">
            {% if messages %}
                <ul class="messages">
                    {% for message in messages %}
                        <li {% if message.tags %} class="{{ message.tags }}" {% endif %}>
                            {{ message }}
                        </li>
                    {% endfor %}
                </ul>
            {% endif %}
        </div>

        <!-- ä¿®æ”¹è¡¨å–® -->
        <div class="profile-form">
            <form method="POST">
                {% csrf_token %}

                <fieldset>
                    <legend> User account settings </legend>
                    {{ user_form.as_table }}
                </fieldset>
                <br>
                <fieldset>
                <legend> User profile </legend>
                    {{ profile_form.as_table }}
                </fieldset>
                <br>
                <button type="submit"> Save </button>
            </form>
        </div>
    </div>
{% endblock %}
