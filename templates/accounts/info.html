{% extends "base.html" %}
{% load static %}  

{% block title %} My Account {% endblock %}

<!-- æ”¾å­åˆ†é çš„ css -->
{% block extra_css %} 
    {{ block.super }}  <!-- ç¹¼æ‰¿æ¯ç‰ˆçš„ css ä½†ä¸è¦è¦†è“‹ -->
    <link rel="stylesheet" href="{% static 'info.css' %}">
{% endblock %}


{% block content %}
    <!-- profile check  -->
    <div class="profile-check">
        <br>
        {% if profile_created %}
            <div class="banner">å·²ç‚ºä½ å»ºç«‹ Profileï¼Œè«‹è£œé½Šè³‡æ–™</div>
        {% elif not user_profile.wallet_address or not user_profile.contact_info %}
            <div class="banner"> âš ï¸ æœªå¡«å¯« Profileï¼Œè£œé½Šå¯è§£é–æ›´å¤šåŠŸèƒ½ ğŸ“</div>
        {% endif %}
    </div>
    
    <div class="user-info">
        <h2> My Account info </h2>

        <!-- å·²ç¶“å¡«å¯«çš„è³‡è¨Š -->
        <div class="profile-display">
            <div>
                <label> Username: </label>
                <p> {{ username }}  </p>
                {% if request.user.email %}
                <label> Email: </label>
                <p> {{ request.user.email }} </p>
                {% endif %}
            </div>
            <div>
                <label> Wallet address: </label>
                <p> <code> {{ user_profile.wallet_address }} </code> </p>
                <label> Contact info: </label>
                <p> {{ user_profile.contact_info }} </p>
            </div>            
        </div> <br>

        <h3> Edit profile </h3>
        <!-- å¡«å¯«è­¦å‘Š -->
        <div class="profile-msg">
            {% if messages %}
                <ul class="messages">
                    {% for message in messages %}
                        <li {% if message.tags %} class="{{ message.tags }}" {% endif %}>
                            {{ message }}
                        </li>
                    {% endfor %}
                </ul>
            {% endif %}
        </div>

        <!-- ä¿®æ”¹è¡¨å–® -->
        <div class="profile-form">
            <form method="POST">
                {% csrf_token %}

                <fieldset>
                    <legend> User account settings </legend>
                    {{ user_form.as_div }}
                </fieldset>
                <br>
                <fieldset>
                <legend> User profile </legend>
                    {{ profile_form.as_div }}
                </fieldset>
                <br>
                <button type="submit"> Save </button>
            </form>
        </div>
    </div>
{% endblock %}
